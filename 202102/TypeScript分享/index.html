<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="https://gitee.com/daixiongsheng/pictures/raw/master/2021/08/29/1630237858228jfs4nc.png"><link rel="icon" type="image/png" sizes="32x32" href="https://gitee.com/daixiongsheng/pictures/raw/master/2021/08/29/1630237858228jfs4nc.png"><link rel="icon" type="image/png" sizes="16x16" href="https://gitee.com/daixiongsheng/pictures/raw/master/2021/08/29/1630237858228jfs4nc.png"><link rel="mask-icon" href="https://gitee.com/daixiongsheng/pictures/raw/master/2021/08/29/1630237858228jfs4nc.png" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"daixiongsheng.github.io",root:"/",scheme:"Muse",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.json"}</script><meta property="og:type" content="article"><meta property="og:title" content="TypeScript分享"><meta property="og:url" content="https://daixiongsheng.github.io/202102/TypeScript%E5%88%86%E4%BA%AB/index.html"><meta property="og:site_name" content="none"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2021-01-06T12:39:38.000Z"><meta property="article:modified_time" content="2021-07-25T07:08:55.001Z"><meta property="article:author" content="Xiongsheng Dai"><meta property="article:tag" content="前端"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://daixiongsheng.github.io/202102/TypeScript%E5%88%86%E4%BA%AB/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>TypeScript分享 | none</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="none" type="application/atom+xml">
</head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">none</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://daixiongsheng.github.io/202102/TypeScript%E5%88%86%E4%BA%AB/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Xiongsheng Dai"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="none"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">TypeScript分享</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-01-06 20:39:38" itemprop="dateCreated datePublished" datetime="2021-01-06T20:39:38+08:00">2021-01-06</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-07-25 15:08:55" itemprop="dateModified" datetime="2021-07-25T15:08:55+08:00">2021-07-25</time></span><div class="post-description"></div></div></header><div class="post-body" itemprop="articleBody"><p>在分享之前我先回答一下为什么要使用 TypeScript（以下简称：TS）？前端的 TS 是什么？我们如何在项目中更好的使用 TS？</p><hr><h1 id="概念">概念</h1><p><strong>TS 是什么？</strong></p><p>首先 TS 是 JavaScript（以下简称：JS）的一个超集。我这里先回顾一下高中的<strong>超集</strong>概念：</p><blockquote><p>如果一个集合 S2 中的每一个元素都在集合 S1 中，且集合 S1 中可能包含 S2 中没有的元素，则集合 S1 就是 S2 的一个超集，反过来，S2 是 S1 的子集。 S1 是 S2 的超集，若 S1 中一定有 S2 中没有的元素，则 S1 是 S2 的真超集，反过来 S2 是 S1 的真子集。</p></blockquote><p>这里的意思就是 TS 包含了所有的 JS 特性，并且拥有一些 JS 里面没有的特性，能够<strong>编译成 JavaScript</strong> 代码。其中最大的特性就是在<strong>JS</strong>中<strong>变量是没有类型的，只有值是有类型的</strong>，<strong>TS</strong>中<strong>变量也具有类型</strong>，其核心能力是在代码编写过程中提供了类型支持，以及在编译过程中进行类型校验。</p><p><strong>前端的 TS 是什么？</strong></p><p>在前端业务中使用 TS 更多的在于对类型的规定，某些高级的 TS 特性（比如抽象类、命名空间）使用场景较少。即使是<strong>泛型</strong>这块使用的最多场景也就在前后端接口请求这块。</p><p><strong>为什么要使用 TS？</strong></p><p>可能有些人觉得写 TS 要写很多类型上面的代码，加大了前端的开发量，其实不然，在我看来动态语言的最大的弊端就是<strong>调试困难</strong>，因为动态语言的<strong>变量是无类型</strong>的，变量指向的内容就不确定，变量的引用只有在<strong>运行时</strong>才知道它具体指向哪里，才知道这个变量包含哪些内容。如果变量有类型，不用等到运行期间，在编码的时候就知道某个对象是不是我们期待的那个对象；其次，在后期迭代的时候回顾先前的代码也比较方便，当项目有新人到来的时候也更方便新人了解项目。前期的小投入可以换来后期大回报。最后 TS 的是 JS 的一个超集，对于前端工程师来说学习成本很低。</p><p><strong>我们如何在项目中更好的使用 TS？</strong></p><p>怎么叫用的好？其实很简单，当我们拿到一个变量时，我可以很清楚的知道这个变量是什么，它指向哪，如果他是高级类型，我们在`<code>vs code</code>或者其他<code>IDE</code>的时候能智能提示他有什么属性或者方法。</p><hr><h2 id="在编译-ts-时即使报错默认也不会中断编译">在编译 <code>TS</code> 时，即使报错，默认也不会中断编译</h2><h2 id="基本类型">基本类型</h2><p>基本类型和 JS 类似，多了几个特有的<code>enum,unknown,void,never,tuple,any</code></p><ul><li><p>boolean</p></li><li><p>number</p></li><li><p>string</p></li><li><p>object</p></li><li><p><code>number[] / Array&lt;number&gt;</code> 数组</p><ul><li>tuple 元组：已知元素<strong>数量</strong>和<strong>类型</strong>的数组，</li></ul></li><li><p>enum</p><ul><li><p>枚举，可以通过键名找到对应键值，也可以通过键值对到相应的键名。</p></li><li><p>枚举的值只能是 <code>number</code> 或者 <code>string</code> 类型</p></li><li><p>```typescript // ts enum Color { // 默认起始值为0 // Red = 0, Red, // 也可以显示的指定对应的值， Green = 100, // 后面的值为前面的值+1 101 Yellow, // 当指定为非number类型时，此时不能再通过值找到对应的键 White = 'White', // 且后面的属性的值不会依次增加，如果不显示的指定值，编译会报错 Black, }</p><p>// Color.Red === 0 // Color.Green === 100 // Color.Yellow === 101</p><p>// 编译后的结果 var Color ;(function (Color) { // 默认起始值为0 // Red = 0, Color[(Color['Red'] = 0)] = 'Red' // 也可以显示的指定对应的值， Color[(Color['Green'] = 100)] = 'Green' // 后面的值为前面的值+1 101 Color[(Color['Yellow'] = 101)] = 'Yellow' // 当指定为非number类型时，此时不能再通过值找到对应的键 // 且后面的属性的值不会依次增加 Color['White'] = 'White' Color[(Color['Black'] = void 0)] = 'Black' })(Color || (Color = {}))</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- void</span><br><span class="line"></span><br><span class="line">- undefined</span><br><span class="line"></span><br><span class="line">- null</span><br><span class="line"></span><br><span class="line">- never</span><br><span class="line"></span><br><span class="line">  - 永远不会返回。很少用到</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;typescript</span><br><span class="line">    function func(): never &#123;</span><br><span class="line">      while (true) &#123;&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p></p></li></ul></li><li><p>unknown</p></li><li><p>any</p></li></ul><p>对于<code>any</code>和<code>unknown</code>，两者最大的区别是，<code>unknown</code>为任何类型的父类型，<code>any</code>既是任何类型的父类型，也是任何类型的子类型</p><p>即任意类型可以转换为 <code>unknown</code> 。</p><hr><h2 id="鸭子类型">鸭子类型</h2><blockquote><p>在程序设计中，<strong>鸭子类型</strong>（英语：duck typing）是动态类型的一种风格。在这种风格中，一个对象有效的语义，不是由继承自特定的类或实现特定的接口，而是由"当前方法和属性的集合"决定。</p></blockquote><blockquote><p>“当看到一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟就可以被称为鸭子。</p></blockquote><p>TypeScript 采用了所谓的 “鸭子类型”策略。当两个类型具有相同的属性以及方法时，它们就可以看作是同一类型。</p><h3 id="如何定义一个变量">如何定义一个变量</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// c 语言</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">Point</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125; Point;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Point p;</span><br><span class="line">    p.x = <span class="number">1</span>;</span><br><span class="line">    p.y = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// c++</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> :</span> <span class="keyword">public</span> Person &#123;</span><br><span class="line">    <span class="built_in">Student</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;age = <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Point p;</span><br><span class="line">    p.x = <span class="number">1</span>;</span><br><span class="line">    p.y = <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// 多态</span></span><br><span class="line">    Person *person = <span class="keyword">new</span> <span class="built_in">Student</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// java</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    String: name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    Student() &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 多态</span></span><br><span class="line">        Point p = <span class="keyword">new</span> Point();</span><br><span class="line">        p.x = <span class="number">1</span>;</span><br><span class="line">        p.y = <span class="number">2</span>;</span><br><span class="line">        Person person = <span class="keyword">new</span> Student();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// typescript</span></span><br><span class="line"><span class="keyword">interface</span> Point &#123;</span><br><span class="line">  x: <span class="built_in">number</span></span><br><span class="line">  y: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> XPoint &#123;</span><br><span class="line">  x: <span class="built_in">number</span></span><br><span class="line">  y: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">p: Point</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p.x, p.y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p: XPoint = &#123;</span><br><span class="line">  x: <span class="number">100</span>,</span><br><span class="line">  y: <span class="number">100</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// p是XPoint 类型，但fn接收 Point 类型，由于TS的鸭子类型策略，所以会当他们为一种类型</span></span><br><span class="line">fn(p)</span><br></pre></td></tr></table></figure><h1 id="接口-interface">接口 interface</h1><p>用来声明类型和接口的</p><p><code>TS</code> 在前端的接口可能又拥有另外一重意思，在其他静态类型语言里面，接口是一种抽象类型，它用来制定一些规范，你要实现我的接口，就必须遵循我的规定。</p><p>在其它静态语言中（比如 Java,C#)的接口的特性，TS 里面也有，但在前端（浏览器层）的 TS 里面，接口<code>interface</code> 更多的是用来表示某一个变量它具体有哪些内容。多态的这一特性很少有使用到。</p><h2 id="type-和interface"><code>type</code> 和<code>interface</code></h2><ul><li>type 类型别名<ul><li>可以用来给已有的类型取一个别名</li><li>只能声明一次，多次声明同一种类型报错</li></ul></li><li>interface 接口/类型定义<ul><li>多次声明同一个接口会进行接口合并</li></ul></li></ul><p><code>type</code> 和<code>interface</code> 的区别在于，能用<code>interface</code>表示的地方，一定能用<code>type</code>表示</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义类型</span></span><br><span class="line"><span class="keyword">interface</span> BaseUser &#123;</span><br><span class="line">  <span class="comment">// 一个只读的id属性，为number类型</span></span><br><span class="line">  <span class="keyword">readonly</span> id: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 现次定义 会进行声明合并，此时的 BaseUser 包含两个属性，id 和name</span></span><br><span class="line"><span class="keyword">interface</span> BaseUser &#123;</span><br><span class="line">  <span class="comment">// 一个只读的id属性，为number类型</span></span><br><span class="line">  name: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 可以理解为给</span></span><br><span class="line"><span class="comment">      &#123;</span></span><br><span class="line"><span class="comment">        readonly id: number</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment">      这种类型，取个别名，叫BaseUser</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> BaseUser = &#123;</span><br><span class="line">  <span class="comment">// 一个只读的id属性，为number类型</span></span><br><span class="line">  <span class="keyword">readonly</span> id: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="属性修饰">属性修饰</h3><ul><li>readonly 只读</li><li>? 可为空</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Point &#123;</span><br><span class="line">  x: <span class="built_in">number</span></span><br><span class="line">  y?: <span class="built_in">number</span></span><br><span class="line">  <span class="comment">// y: undefined | number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// y?: number;</span></span><br><span class="line"><span class="comment">// y: undefined | number</span></span><br><span class="line"><span class="comment">// 这两种语义不一样</span></span><br><span class="line"><span class="comment">// 第一个表示，y属性可以有，可以没有</span></span><br><span class="line"><span class="comment">// 第二个表示y一定有，他的值为 undefined 或者 number</span></span><br></pre></td></tr></table></figure><p><strong>类型断言/强制类型转换</strong></p><p>类型断言，这里我习惯称之为强制类型转换。</p><ul><li>```typescript interface Point { x: number y: number } // 报错，因为ts认为{}是一个对象，他没有x,y这两属性，就不能赋值给p const p: Point = {} // 即使{}没x,y 这里通过断言的形式告诉编译器{}它的值就是一个Point类型的值 const p1: Point = {} as Point const p2: Point =<point>{}<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**可以索引类型**</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;typescript</span><br><span class="line">&#x2F;&#x2F; 索引类型</span><br><span class="line">&#x2F;&#x2F; 类型限定</span><br><span class="line">interface Person &#123;</span><br><span class="line">  &#x2F;&#x2F; 属性扩充,表示Person类型的属性只能是number 或者 string类型的,并且可以添加未在内部声明的字段</span><br><span class="line">  [propName: string]: number | string</span><br><span class="line">  age: number</span><br><span class="line">  name: string</span><br><span class="line">  address: string</span><br><span class="line">&#125;</span><br><span class="line">const p: Person &#x3D; &#123;</span><br><span class="line">  age: 18,</span><br><span class="line">  name: &#39;Pic&#39;,</span><br><span class="line">  address: &#39;&#39;,</span><br><span class="line">  &#x2F;&#x2F; 原定义中没有，但[propName: string]: number | string  表示可以进行属性动态添加，只要满足属性为number或者string</span><br><span class="line">  zipCode: &#39;111&#39;,</span><br><span class="line">&#125;</span><br><span class="line">p.gender &#x3D; 0</span><br></pre></td></tr></table></figure></point></li></ul><p><strong>函数类型</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数类型, 函数代有特定属性（cancel)</span></span><br><span class="line"><span class="keyword">interface</span> ScrollDebounceFunction &#123;</span><br><span class="line">  (event: Event): <span class="built_in">void</span></span><br><span class="line">  cancel: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数类型, 函数接受一个Event,无返回值</span></span><br><span class="line"><span class="keyword">type</span> ScrollDebounceFunction = <span class="function">(<span class="params">event: Event</span>) =&gt;</span> <span class="built_in">void</span></span><br></pre></td></tr></table></figure><p><strong>继承</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义类型</span></span><br><span class="line"><span class="keyword">interface</span> BaseUser &#123;</span><br><span class="line">  <span class="comment">// 一个只读的id属性，为number类型</span></span><br><span class="line">  <span class="keyword">readonly</span> id: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承自BaseUser，会相应的继承对应的属性</span></span><br><span class="line"><span class="keyword">interface</span> User <span class="keyword">extends</span> BaseUser &#123;</span><br><span class="line">  <span class="comment">// 这里存在一个继承自BaseUser的id属性并且是可读的</span></span><br><span class="line">  <span class="comment">// readonly id: number</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 可以取消父属性的只读限制</span></span><br><span class="line">  <span class="comment">// id: number</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 不能修改同名的父属性的类型</span></span><br><span class="line">  <span class="comment">// id: string   // 报错</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 不能修改同名的父属性必选限制, 但可以将父属性的可选改成必选</span></span><br><span class="line">  <span class="comment">// id?: number   // 报错</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// username 为string类型或者undefined</span></span><br><span class="line">  username: <span class="built_in">string</span> | <span class="literal">undefined</span></span><br><span class="line">  <span class="comment">// 表示address是可选的，它要么值为string类型的，要么不存在</span></span><br><span class="line">  address?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多继承</span></span><br><span class="line"><span class="keyword">interface</span> Base1 &#123;</span><br><span class="line">  <span class="comment">// id: number;</span></span><br><span class="line">  age: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Base2 &#123;</span><br><span class="line">  id: <span class="built_in">string</span></span><br><span class="line">  address: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Person <span class="keyword">extends</span> Base1, Base2 &#123;</span><br><span class="line">  name: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在多继承时，会继承所有父级的属性，当多个父级有相同的属性，但属性的只读、可选限定不同时，会继承失败，报错。当父子都有相同的属性时，子属性与父属性的类型不同时，类型相同时，以子属性的只读限定为准。但当属性为必选限制，子属性就不能改成可选限定。</p><hr><h1 id="泛型">泛型</h1><p>我理解的泛型是为了增强类型的可复用性，在定义某一类型时，某个属性的具体类型不确定，但这个类型的基本结构可预估。</p><h3 id="内置基础泛型">内置基础泛型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Admin &#123;</span><br><span class="line">  name: <span class="built_in">string</span></span><br><span class="line">  age: <span class="built_in">number</span></span><br><span class="line">  address: <span class="built_in">string</span></span><br><span class="line">  role: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 让该类型的所有属性为可选的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">type</span> Partial&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]?: T[P]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> A = Partial&lt;Admin&gt;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="comment">// interface A &#123;</span></span><br><span class="line"><span class="comment">//     name?: string</span></span><br><span class="line"><span class="comment">//     age?: number</span></span><br><span class="line"><span class="comment">//     address?: string</span></span><br><span class="line"><span class="comment">//     role?: string</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 让该类型的所有属性为必选的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">type</span> Required&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]-?: T[P]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Readonly&lt;T&gt; = &#123;</span><br><span class="line">  <span class="keyword">readonly</span> [P <span class="keyword">in</span> keyof T]: T[P]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Pick&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> K]: T[P]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Parameters&lt;T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (</span><br><span class="line">  ...args: infer P</span><br><span class="line">) =&gt; <span class="built_in">any</span></span><br><span class="line">  ? P</span><br><span class="line">  : <span class="built_in">never</span></span><br><span class="line"><span class="keyword">type</span> ConstructorParameters&lt;T <span class="keyword">extends</span> <span class="keyword">new</span> (...args: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; =</span><br><span class="line">  T <span class="keyword">extends</span> <span class="keyword">new</span> (...args: infer P) =&gt; <span class="built_in">any</span> ? P : <span class="built_in">never</span></span><br><span class="line"><span class="keyword">type</span> ReturnType&lt;T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (</span><br><span class="line">  ...args: <span class="built_in">any</span></span><br><span class="line">) =&gt; infer R</span><br><span class="line">  ? R</span><br><span class="line">  : <span class="built_in">any</span></span><br><span class="line"><span class="keyword">type</span> InstanceType&lt;T <span class="keyword">extends</span> <span class="keyword">new</span> (...args: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> <span class="keyword">new</span> (</span><br><span class="line">  ...args: <span class="built_in">any</span></span><br><span class="line">) =&gt; infer R</span><br><span class="line">  ? R</span><br><span class="line">  : <span class="built_in">any</span></span><br><span class="line"><span class="keyword">interface</span> ThisType&lt;T&gt; &#123;&#125;</span><br></pre></td></tr></table></figure><p><strong>几个解释</strong></p><p>上面的<code>T</code> 称之为 <em>类型变量</em>，它是一种特殊的变量，只用于表示类型而不是值。</p><p><code>extends</code> 当<code>extends</code>在形参列表里面时，表示的对传入的类型 T 的泛型约束。<code>T extends (...args: any) =&gt; any</code> 这里对 T 的限制就是<code>T</code>只能是函数类型，</p><p><code>infer</code> 代表推理。并且只能的 extends 一起用</p><p><strong>这里详细说明一下 infer 的作用</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里可以先对这个表达式进行拆分</span></span><br><span class="line"><span class="comment">// 我们先定义一个函数类型, 用来比较两个的数的大小，如果第一个参数大于第二个参数就返回true</span></span><br><span class="line"><span class="keyword">type</span> AMoreThanB = <span class="function">(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">boolean</span></span><br><span class="line"><span class="comment">// 我们再定义一个比较简单的ReturnType</span></span><br><span class="line"><span class="keyword">type</span> ReturnType&lt;T <span class="keyword">extends</span> AMoreThanB&gt; = T <span class="keyword">extends</span> AMoreThanB ? <span class="built_in">boolean</span> : <span class="built_in">any</span></span><br><span class="line"><span class="comment">// T extends AMoreThanB ? boolean : any;</span></span><br><span class="line"><span class="comment">// 这个表达式肯定会返回一个类型，</span></span><br><span class="line"><span class="comment">// 这里的? : 有点类似三元运算符，</span></span><br><span class="line"><span class="comment">// 不防这样理解，当满足 T extends AMoreThanB时返回boolean，否则返回any</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 再使用这个ReturnType, 因为对T的限定只能是AMoreThanB，我们就传入一个AMoreThanB，然后就得到了Rt</span></span><br><span class="line"><span class="keyword">type</span> Rt = ReturnType&lt;AMoreThanB&gt;</span><br><span class="line"><span class="comment">// 这里肯定满足 T extends AMoreThanB，因为我们传入的T就是AMoreThanB，所以得到的Rt一定就是boolean,</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果我们传入一个其他的类型</span></span><br><span class="line"><span class="keyword">type</span> Rt2 = ReturnType&lt;<span class="built_in">boolean</span>&gt;</span><br><span class="line"><span class="comment">// 这个时候就报错了，因为我们对T的限制他只能是AMoreThanB类型，或者这么说限制传入的这个函数必须要两个number类型的参数，并且返回一个boolean类型值</span></span><br><span class="line"><span class="comment">// 现在我们放宽点</span></span><br><span class="line"><span class="keyword">type</span> ReturnType&lt;T <span class="keyword">extends</span> (...arg: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> AMoreThanB</span><br><span class="line">  ? <span class="built_in">boolean</span></span><br><span class="line">  : <span class="built_in">any</span></span><br><span class="line"><span class="comment">// 现在T可能是任何一个函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们再定义一个新的函数类型</span></span><br><span class="line"><span class="keyword">type</span> TimeoutFuc = <span class="function">(<span class="params">callback: AMoreThanB, delay: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这个时候我们再次使用这个ReturnType</span></span><br><span class="line"><span class="keyword">type</span> Rt3 = ReturnType&lt;TimeoutFuc&gt;</span><br><span class="line"><span class="comment">// 由于TimeoutFuc 不满足  T extends AMoreThanB ，所有返回any,这里的Rt3就是any;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 还没讲到infer，不着急，</span></span><br><span class="line"><span class="comment">// 我们再把ReturnType改进一下</span></span><br><span class="line"><span class="keyword">type</span> ReturnType&lt;T <span class="keyword">extends</span> (...arg: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (...arg: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span></span><br><span class="line">  ? <span class="built_in">boolean</span></span><br><span class="line">  : <span class="built_in">any</span></span><br><span class="line"><span class="comment">// 这个时候不管传入什么样的函数返回都是boolean, 因为T extends (...arg: any) =&gt; any也一定满足。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们想返回一些动态的类型怎么办，或者我们想返回一些和T相关的类型</span></span><br><span class="line"><span class="comment">// 这个时候 infer就出来了</span></span><br><span class="line"><span class="keyword">type</span> ReturnType&lt;T <span class="keyword">extends</span> (...arg: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (</span><br><span class="line">  ...arg: <span class="built_in">any</span></span><br><span class="line">) =&gt; infer R</span><br><span class="line">  ? R</span><br><span class="line">  : <span class="built_in">any</span></span><br><span class="line"><span class="comment">// 这里我们将any 换成了infer R, 并当满足这个条件时把R返回</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Rt4 = ReturnType&lt;TimeoutFuc&gt;</span><br><span class="line"><span class="comment">// 当我们再次使用时，这里的TimeoutFuc，满足 T extends (...arg: any) =&gt; infer R 。</span></span><br><span class="line"><span class="comment">// 并且我们还拿到了TimeoutFuc这个函数的返回类型并赋给了R,然后返回R，所以，这里的Rt4就是TimeoutFuc这个函数的返回类型：num ber</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ReturnType&lt;T <span class="keyword">extends</span> (...arg: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (</span><br><span class="line">  arg1: infer T,</span><br><span class="line">  ...arg: <span class="built_in">any</span></span><br><span class="line">) =&gt; infer R</span><br><span class="line">  ? T | R</span><br><span class="line">  : <span class="built_in">any</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们加大难度，这个时候的ReturnType返回的是传入函数类型的第一个参数类型和函数的返回类型的 并</span></span><br><span class="line"><span class="comment">// 这里就等同于</span></span><br><span class="line"><span class="keyword">type</span> Rt5 = ReturnType&lt;TimeoutFuc&gt;</span><br><span class="line"><span class="comment">// type Rt5 = number | AMoreThanB;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// infer 的作用就是推断相应的类型.</span></span><br></pre></td></tr></table></figure><hr><h1 id="类">类</h1><p>继承，接口，多态就不讲了。</p><p>讲一下类的装饰器，装饰器可以对原有的类，或者属性，方法，在<strong>编译的时候</strong>进行加强。</p><p><strong>执行顺序</strong> 属性装饰器、参数装饰器、方法装饰器、类装饰器</p><p>类装饰器是作用于当前这个类，属性装饰器、方法装饰器、参数装饰器</p><p>作用于这个类的 prototype</p><p><strong>执行时机</strong> 编译时</p><h2 id="属性装饰器">属性装饰器</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fieldDescriptor</span>(<span class="params">target: <span class="built_in">any</span>, fieldName: <span class="built_in">string</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;fieldDescriptor&#x27;</span>, <span class="keyword">typeof</span> prototype, prototype)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参数装饰器">参数装饰器</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">paramsDescriptor</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  target: <span class="built_in">any</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  propertyKey: <span class="built_in">string</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  parameterIndex: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;paramsDescriptor&#x27;</span>, propertyKey, parameterIndex)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="方法装饰器">方法装饰器</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">methodDescriptor</span>(<span class="params">prototype: Demo, methodName: <span class="built_in">string</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;methodDescriptor&#x27;</span>, <span class="keyword">typeof</span> prototype, prototype)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="类装饰器">类装饰器</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">classDescriptor</span>(<span class="params">constructor: <span class="built_in">any</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;classDescriptor&#x27;</span>, <span class="keyword">typeof</span> <span class="title">constructor</span>, <span class="title">constructor</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fieldDescriptor</span>(<span class="params">target: <span class="built_in">any</span>, fieldName: <span class="built_in">string</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;fieldDescriptor&#x27;</span>, <span class="keyword">typeof</span> target, target)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">paramsDescriptor</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  target: <span class="built_in">any</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  propertyKey: <span class="built_in">string</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  parameterIndex: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;paramsDescriptor&#x27;</span>, propertyKey, parameterIndex)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">methodDescriptor</span>(<span class="params">prototype: Demo, methodName: <span class="built_in">string</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;methodDescriptor&#x27;</span>, <span class="keyword">typeof</span> prototype, prototype)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">classDescriptor</span>(<span class="params">constructor: <span class="built_in">any</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;classDescriptor&#x27;</span>, <span class="keyword">typeof</span> <span class="title">constructor</span>, <span class="title">constructor</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title">classDescriptor</span></span><br><span class="line"><span class="title">class</span> <span class="title">Person</span> &#123;</span><br><span class="line">  <span class="meta">@fieldDescriptor</span></span><br><span class="line">  name: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@methodDescriptor</span></span><br><span class="line">  <span class="function"><span class="title">log</span>(<span class="params"><span class="meta">@paramsDescriptor</span> p: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="编译后">编译后</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> __decorate =</span><br><span class="line">  (<span class="built_in">this</span> &amp;&amp; <span class="built_in">this</span>.__decorate) ||</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">decorators, target, key, desc</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="built_in">arguments</span>.length,</span><br><span class="line">      r =</span><br><span class="line">        c &lt; <span class="number">3</span></span><br><span class="line">          ? target</span><br><span class="line">          : desc === <span class="literal">null</span></span><br><span class="line">          ? (desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(target, key))</span><br><span class="line">          : desc,</span><br><span class="line">      d</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">Reflect</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">Reflect</span>.decorate === <span class="string">&#x27;function&#x27;</span>)</span><br><span class="line">      r = <span class="built_in">Reflect</span>.decorate(decorators, target, key, desc)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = decorators.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="keyword">if</span> ((d = decorators[i]))</span><br><span class="line">          r = (c &lt; <span class="number">3</span> ? d(r) : c &gt; <span class="number">3</span> ? d(target, key, r) : d(target, key)) || r</span><br><span class="line">    <span class="keyword">return</span> c &gt; <span class="number">3</span> &amp;&amp; r &amp;&amp; <span class="built_in">Object</span>.defineProperty(target, key, r), r</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">var</span> __param =</span><br><span class="line">  (<span class="built_in">this</span> &amp;&amp; <span class="built_in">this</span>.__param) ||</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">paramIndex, decorator</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target, key</span>) </span>&#123;</span><br><span class="line">      decorator(target, key, paramIndex)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fieldDescriptor</span>(<span class="params">target, fieldName</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;fieldDescriptor&#x27;</span>, <span class="keyword">typeof</span> target, target)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">paramsDescriptor</span>(<span class="params">target, propertyKey, parameterIndex</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;paramsDescriptor&#x27;</span>, propertyKey, parameterIndex)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">methodDescriptor</span>(<span class="params">prototype, methodName</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;methodDescriptor&#x27;</span>, <span class="keyword">typeof</span> prototype, prototype)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">classDescriptor</span>(<span class="params">constructor</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;classDescriptor&#x27;</span>, <span class="keyword">typeof</span> <span class="title">constructor</span>, <span class="title">constructor</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title">var</span> <span class="title">Person</span> = /** @<span class="title">class</span> */ (<span class="params"><span class="keyword">function</span> () &#123;</span></span><br><span class="line"><span class="params">  <span class="keyword">function</span> Person() &#123;&#125;</span></span><br><span class="line"><span class="params">  Person.prototype.log = <span class="keyword">function</span> (p) &#123;</span></span><br><span class="line"><span class="params">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span></span><br><span class="line"><span class="params">  &#125;</span></span><br><span class="line"><span class="params">  __decorate([fieldDescriptor], Person.prototype, <span class="string">&#x27;name&#x27;</span>)</span></span><br><span class="line"><span class="params">  __decorate(</span></span><br><span class="line"><span class="params">    [methodDescriptor, __param(<span class="number">0</span>, paramsDescriptor)],</span></span><br><span class="line"><span class="params">    Person.prototype,</span></span><br><span class="line"><span class="params">    <span class="string">&#x27;log&#x27;</span></span></span><br><span class="line"><span class="params">  )</span></span><br><span class="line"><span class="params">  Person = __decorate([classDescriptor], Person)</span></span><br><span class="line"><span class="params">  <span class="keyword">return</span> Person</span></span><br><span class="line"><span class="params">&#125;</span>)(<span class="params"></span>)</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-tags"><a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"># 前端</a></div><div class="post-nav"><div class="post-nav-item"><a href="/202012/2020%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" rel="prev" title="2020年度总结"><i class="fa fa-chevron-left"></i> 2020年度总结</a></div><div class="post-nav-item"><a href="/202103/%E6%89%8B%E6%92%B8%E9%9D%A2%E8%AF%95%E5%B8%B8%E9%97%AE%E7%9A%84%E5%87%A0%E4%B8%AA%E5%BA%95%E5%B1%82%E7%AE%97%E6%B3%95/" rel="next" title="手撸面试常问的几个底层算法">手撸面试常问的几个底层算法 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:t}=CONFIG.comments;if(CONFIG.comments.storage&&(t=localStorage.getItem("comments_active")||t),t){let e=document.querySelector(`a[href="#comment-${t}"]`);e&&e.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{if(!t.target.matches(".tabs-comment .tab-content .tab-pane"))return;let e=t.target.classList[1];localStorage.setItem("comments_active",e)})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">1.</span> <span class="nav-text">概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8%E7%BC%96%E8%AF%91-ts-%E6%97%B6%E5%8D%B3%E4%BD%BF%E6%8A%A5%E9%94%99%E9%BB%98%E8%AE%A4%E4%B9%9F%E4%B8%8D%E4%BC%9A%E4%B8%AD%E6%96%AD%E7%BC%96%E8%AF%91"><span class="nav-number">1.1.</span> <span class="nav-text">在编译 TS 时，即使报错，默认也不会中断编译</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.2.</span> <span class="nav-text">基本类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.3.</span> <span class="nav-text">鸭子类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F"><span class="nav-number">1.3.1.</span> <span class="nav-text">如何定义一个变量</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3-interface"><span class="nav-number">2.</span> <span class="nav-text">接口 interface</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#type-%E5%92%8Cinterface"><span class="nav-number">2.1.</span> <span class="nav-text">type 和interface</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E4%BF%AE%E9%A5%B0"><span class="nav-number">2.1.1.</span> <span class="nav-text">属性修饰</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B3%9B%E5%9E%8B"><span class="nav-number">3.</span> <span class="nav-text">泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E7%BD%AE%E5%9F%BA%E7%A1%80%E6%B3%9B%E5%9E%8B"><span class="nav-number">3.0.1.</span> <span class="nav-text">内置基础泛型</span></a></li></ol></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B1%BB"><span class="nav-number">4.</span> <span class="nav-text">类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">4.1.</span> <span class="nav-text">属性装饰器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">4.2.</span> <span class="nav-text">参数装饰器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">4.3.</span> <span class="nav-text">方法装饰器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">4.4.</span> <span class="nav-text">类装饰器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%90%8E"><span class="nav-number">4.5.</span> <span class="nav-text">编译后</span></a></li></ol></li></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Xiongsheng Dai</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">58</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">23</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/daixiongsheng" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;daixiongsheng" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:daixiongsheng@gmail.com" title="E-Mail → mailto:daixiongsheng@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fas fa-rss fa-fw"></i>RSS</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="/utils/" title="&#x2F;utils&#x2F;">工具方法库</a></li></ul></div><div class="widget-wrap" style="width:90%;margin-left:auto;margin-right:auto;opacity:.97"><div class="widget" id="CloudCalendar"></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Xiongsheng Dai</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>document.querySelectorAll("pre.mermaid").length&&NexT.utils.getScript("https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js",()=>{mermaid.initialize({theme:"default",logLevel:3,flowchart:{curve:"linear"},gantt:{axisFormat:"%m/%d/%Y"},sequence:{actorMargin:50}})},window.mermaid)</script></body></html>